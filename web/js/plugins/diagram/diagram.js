/*
@license

dhtmlxDiagram v.1.1.0 Trial
This software is covered by DHTMLX Evaluation License. Contact sales@dhtmlx.com to get Commercial or Enterprise license. Usage without proper license is prohibited.

(c) Dinamenta, UAB.
*/
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/codebase/",e(e.s=76)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.event=function(t,e,n){t.addEventListener(e,n,!1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(24),r=function(){function t(t,e){this.config=t,this.ev=e,this._marks={},this.config.value=this.config.value||"",this.$editor=!0}return t.prototype.setValue=function(t,e){(t!==this.config.value||e)&&(this._getInput().value=this.config.value=t)},t.prototype.render=function(){var t=this.$view=document.createElement("DIV");return t.setAttribute("dhx_id",this.config.id),t.className="dhx_text_item",t.innerHTML=this._toHTML(),this._setEvents(),t},t.prototype.mark=function(t,e,n){var i=n||this.$view;!1===e||this._marks[t]?!1===e&&this._marks[t]&&(delete this._marks[t],i.className=i.className.replace(" "+t,"")):(this._marks[t]=!0,i.className+=" "+t)},t.prototype.getText=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.getValue()},t.prototype.focus=function(){var t=this._getInput();t&&t.focus&&t.focus()},t.prototype.getValue=function(t){return t?this._getInput().value:this.config.value},t.prototype.clear=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._marks={},this.setValue("")},t.prototype._getInput=function(){return this.$view.getElementsByTagName("input")[0]},t.prototype._setEvents=function(){var t=this;i.event(this._getInput(),"blur",function(){return t._changed()}),this.config.validate&&i.event(this._getInput(),"keydown",function(){return setTimeout(function(){return t._validate()})})},t.prototype._toHTML=function(){return"<div class='dhx_label'>"+this.config.label+"</div><div class='dhx_value'><input type='text' value=''></div>"},t.prototype._changed=function(){var t=this.getValue(!0),e=this.config.value;t!==e&&(this.config.validate&&!this._checkIsValid()?(this.setValue(this.config.value,!0),this.mark("dhx_invalid",!1)):(this.setValue(t,!0),this.ev.callEvent("onChange",[this.config.id,t,e])))},t.prototype._validate=function(){this._checkIsValid()?this.mark("dhx_invalid",!1):this.mark("dhx_invalid")},t.prototype._checkIsValid=function(){var t=this.config.validate;if(t){var e=!0,n=this.getValue(!0);return""!==n&&(e="function"==typeof(t=o.validation[t]||t)?t.call(this,n):n.match(t)),e}},t}();e.Text=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.config=this.setDefaults(t),this.id=t.id}return t.prototype.isConnector=function(){return!1},t.prototype.getCenter=function(){var t=this.config;return{x:Math.abs(t.width/2),y:Math.abs(t.height/2)}},t.prototype.getMetaInfo=function(){return[{id:"text",label:"Text",type:"text"}]},t.prototype.move=function(t,e){this.update({x:t,y:e})},t.prototype.resize=function(t,e){this.update({width:t,height:e})},t.prototype.rotate=function(t){this.update({angle:t})},t.prototype.update=function(t){for(var e in t)this.config[e]=t[e]},t.prototype.toSVG=function(){return""},t.prototype.getPoint=function(t,e){var n=this.config;if(n.angle){var i=n.x+n.width/2,o=n.y+n.height/2,r=n.angle*(Math.PI/180);return{x:(t-i)*Math.cos(r)-(e-o)*Math.sin(r)+i,y:(t-i)*Math.sin(r)+(e-o)*Math.cos(r)+o}}return{x:t,y:e}},t.prototype.setCss=function(t){this.config.css=t},t.prototype.getCss=function(){return(this.config.$selected?"dhx_selected ":"")+(this.config.css||"")},t.prototype.setDefaults=function(t){return t},t}();e.BaseShape=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCircleTpl=function(t){if(!t.$count&&!1!==t.open)return"";var e="vertical"===t.dir,n=!1===t.open,i=t.width/2,o=t.height/2,r={x:e?0:i,y:e?o:t.height},s=n?'<polyline points="\n\t\t\t'+(r.x-5)+","+r.y+"\n\t\t\t"+r.x+","+r.y+"\n\t\t\t"+r.x+","+(r.y-5)+"\n\t\t\t"+r.x+","+(r.y+5)+"\n\t\t\t"+r.x+","+r.y+"\n\t\t\t"+(r.x+5)+","+r.y+'"\n\t\t\tstroke-width="2" stroke="white" fill="none"/>':'<line x1="'+(r.x-5)+'" y1="'+r.y+'" x2="'+(r.x+5)+'" y2="'+r.y+'" stroke-width="2" stroke="white"/>';return"\n\t\t<g x="+r.x+' y="'+r.y+'" dhx_diagram="hide" class="'+(n?"dhx_expand_icon":"dhx_hide_icon")+'">\n\t\t\t<circle r="10" cx="'+r.x+'" cy="'+r.y+'" fill="'+t.$expandColor+'"/>\n\t\t\t'+s+"\n\t\t</g>"},e.getHeaderTpl=function(t){var e=t.color||"#20b6e2";return'\n\t\t<rect\n\t\t\theight="3.5"\n\t\t\twidth="'+t.width+'"\n\t\t\tclass="dhx_item_header"\n\t\t\tstroke="'+e+'"\n\t\t\tfill="'+e+'"\n\t\t\tstroke-width=1\n\t\t/>'},e.getTextTemplate=function(t,e){return'<foreignObject\n\t\twidth="'+t.width+'"\n\t\toverflow="hidden"\n\t\theight="'+t.height+'"\n\t\ttransform="translate(0 0)"\n\t\t>\n\t\t\t<div class="shape_content" style="width:'+t.width+"px;height:"+t.height+'px;">\n\t\t\t\t'+e+"\n\t\t\t</div>\n\t\t</foreignObject>"}},function(t,e,n){"use strict";function i(t){if(!(t instanceof Object))return t;var e,n=t.constructor;switch(n){case RegExp:e=new n(t);break;case Date:e=new n(t.getTime());break;default:e=new n}for(var o in t)e[o]=i(t[o]);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.extend=function(t,e){t=t||{};for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t};var o=(new Date).valueOf();e.uid=function(){return"u"+o++},e.copy=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNode=function(t){return"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),t||document.body},e.insert=function(t,e){return"string"==typeof e?(t.insertAdjacentHTML("beforeend",e),t.lastChild):(t.appendChild(e),e)},e.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},e.children=function(t,e){for(var n=[],i=t.childNodes,o=0;o<i.length;++o){var r=i[o];0===r.className.indexOf(e)&&n.push(r)}return n},e.locate=function(t,e){void 0===e&&(e="dhx_id");for(var n=t.target;n&&n.getAttribute;){var i=n.getAttribute(e);if(i)return i;n=n.parentNode}},e.addCss=function(t,e){t.classList.add(e)},e.removeCss=function(t,e){t.classList.remove(e)},e.getCoords=function(t){var e=t.getBoundingClientRect(),n=document.body,i=window.pageYOffset||n.scrollTop,o=window.pageXOffset||n.scrollLeft;return{top:e.top+i,left:e.left+o,right:n.offsetWidth-e.right,bottom:n.offsetHeight-e.bottom,width:e.right-e.left,height:e.bottom-e.top}},e.isNested=function(t,e){for(;t&&e;){if(e===t)return!0;t=t.parentNode}return!1};var i=-1;e.getScrollbarWidth=function(){if(i>-1)return i;var t=document.createElement("div");return document.body.appendChild(t),t.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",i=t.offsetWidth-t.clientWidth,document.body.removeChild(t),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.events={},this.context=t||this}return t.prototype.on=function(t,e,n){t=t.toLowerCase(),this.events[t]=this.events[t]||[],this.events[t].push({callback:e,context:n||this.context})},t.prototype.detach=function(t,e){var n=this.events[t];if(e)for(var i=n.length-1;i>=0;i--)n[i].context===e&&n.splice(i,1);else this.events[t]=[]},t.prototype.fire=function(t,e){return t=t.toLowerCase(),e=e instanceof Array?e:[e],!this.events[t]||this.events[t].map(function(t){return t.callback.apply(t.context,e)}).indexOf(!1)<0},t}();e.EventSystem=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter(),n=t.$selected?t.color:"#E4E4E4",i=this.getCoords(t);return'\n\t\t<g transform="\n\t\ttranslate('+i.x+","+i.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+')"\n\t\tclass="'+this.getCss()+'"\n\t\tdhx_id="'+t.id+'"\n\t\t>\n\t\t\t<rect\n\t\t\t\tclass="dhx_item_shape"\n\t\t\t\tid="'+t.id+'"\n\t\t\t\theight="'+t.height+'"\n\t\t\t\twidth="'+t.width+'"\n\t\t\t\trx=1\n\t\t\t\try=1\n\t\t\t\tstroke="'+n+'"\n\t\t\t\tstroke-width=1\n\t\t\t/>\n\t\t\t'+r.getTextTemplate(t,this.text())+"\n\t\t\t"+r.getHeaderTpl(t)+"\n\t\t\t"+r.getCircleTpl(t)+"\n\t\t</g>"},e.prototype.getMetaInfo=function(){return[{id:"text",label:"Text",type:"text"}]},e.prototype.getCss=function(){return"dhx_diagram_item "+t.prototype.getCss.call(this)},e.prototype.setDefaults=function(t){return t.width=t.width||140,t.height=t.height||90,t},e.prototype.text=function(){return this.config.text||""},e.prototype.getCoords=function(t){var e=t.x,n=t.y;return t.dx&&(e=t.x+t.dx),t.dy&&(n=t.y+t.dy),{x:e,y:n}},e}(o.BaseShape);e.DiagramCard=s},function(t,e,n){(function(e,n){!function(){function i(t){e.setImmediate?n(t):e.importScripts?setTimeout(t):(s[++r]=t,e.postMessage(r,"*"))}function o(t){"use strict";function e(t,e,n,i){if(2==c)return i();if("object"!=typeof u&&"function"!=typeof u||"function"!=typeof t)i();else try{var o=0;t.call(u,function(t){o++||(u=t,e())},function(t){o++||(u=t,n())})}catch(t){u=t,n()}}function n(){var t;try{t=u&&u.then}catch(t){return u=t,c=2,n()}e(t,function(){c=1,n()},function(){c=2,n()},function(){try{1==c&&"function"==typeof r?u=r(u):2==c&&"function"==typeof s&&(u=s(u),c=1)}catch(t){return u=t,l()}u==a?(u=TypeError(),l()):e(t,function(){l(3)},l,function(){l(1==c&&3)})})}if("function"!=typeof t&&void 0!=t)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var r,s,a=this,c=0,u=0,h=[];a.promise=a,a.resolve=function(t){return r=a.fn,s=a.er,c||(u=t,c=1,i(n)),a},a.reject=function(t){return r=a.fn,s=a.er,c||(u=t,c=2,i(n)),a},a._d=1,a.then=function(t,e){if(1!=this._d)throw TypeError();var n=new o;return n.fn=t,n.er=e,3==c?n.resolve(u):4==c?n.reject(u):h.push(n),n},a.catch=function(t){return a.then(null,t)};var l=function(t){c=t||4,h.map(function(t){3==c&&t.resolve(u)||t.reject(u)})};try{"function"==typeof t&&t(a.resolve,a.reject)}catch(t){a.reject(t)}return a}var r=1,s={},a=!1;(e=this).setImmediate||e.addEventListener("message",function(t){if(t.source==e)if(a)i(s[t.data]);else{a=!0;try{s[t.data]()}catch(t){}delete s[t.data],a=!1}}),o.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof o?t:new o(function(e){e(t)})},o.reject=function(t){if(1!=this._d)throw TypeError();return new o(function(e,n){n(t)})},o.all=function(t){function e(i,o){return o?n.resolve(o):i?n.reject(i):(0==t.reduce(function(t,e){return e&&e.then?t+1:t},0)&&n.resolve(t),void t.map(function(n,i){n&&n.then&&n.then(function(n){return t[i]=n,e(),n},e)}))}if(1!=this._d)throw TypeError();if(!(t instanceof Array))return o.reject(TypeError());var n=new o;return e(),n},o.race=function(t){function e(i,o){return o?n.resolve(o):i?n.reject(i):(0==t.reduce(function(t,e){return e&&e.then?t+1:t},0)&&n.resolve(t),void t.map(function(t,n){t&&t.then&&t.then(function(t){e(null,t)},e)}))}if(1!=this._d)throw TypeError();if(!(t instanceof Array))return o.reject(TypeError());if(0==t.length)return new o;var n=new o;return e(),n},o._d=1,t.exports=o}()}).call(e,n(12),n(38).setImmediate)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=n(22),r=n(23);e.isEqualObj=function(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0},e.naturalCompare=function(t,e){var n=[],i=[];for(t.replace(/(\d+)|(\D+)/g,function(t,e,i){n.push([e||1/0,i||""])}),e.replace(/(\d+)|(\D+)/g,function(t,e,n){i.push([e||1/0,n||""])});n.length&&i.length;){var o=n.shift(),r=i.shift(),s=o[0]-r[0]||o[1].localeCompare(r[1]);if(s)return s}return n.length-i.length},e.findByConf=function(t,e){if(e.rule&&"function"==typeof e.rule){if(e.rule.call(this,t))return t}else if(e.by&&e.match&&t[e.by]===e.match)return t},e.isDebug=function(){var t=window.dhx;if(void 0!==t)return void 0!==t.debug&&t.debug},e.dhxWarning=function(t){console.warn(t)},e.dhxError=function(t){throw new Error(t)},e.toProxy=function(t){var e=typeof t;return"string"===e?new i.DataProxy(t):"object"===e?t:void 0},e.toDataDriver=function(t){if("string"==typeof t)switch(t){case"csv":return new o.CsvDriver;case"json":return new r.JsonDriver;default:console.warn("incorrect driver type",t)}else if("object"==typeof t)return t}},,,function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=n(6),s=n(27),a=n(5),c=n(15),u=n(4),h=n(25),l=function(){function t(t,e){var n=this;this._container=a.toNode(t),this._wrapper=a.insert(this._container,'<div class="dhx_diagram_wrapper"\n\t\t\tstyle="\n\t\t\t\twidth:'+this._container.offsetWidth+"px;\n\t\t\t\theight:"+this._container.offsetHeight+'px;\n\t\t\t"></div>'),this.config=e||{},this._event=new r.EventSystem(this),this.config.scale=this.config.scale||1;var o={x:40,y:40,itemX:40,itemY:40};this.config.gridStep=this.config.gridStep||10,this.config.margin?this.config.margin=i({},o,this.config.margin):this.config.margin=o,this.config.scroll=this.config.scroll||!1,window.SVGForeignObjectElement||(this.config.defaultShapeType="svg-card"),this._shapesCollection=new s.ShapesCollection(this.config.defaultShapeType||"card",this.config.defaultLinkType||"line"),this._shapesCollection.attachEvent("onBeforeAdd",function(t){return n.callEvent("onBeforeAdd",[t.id])}),this._shapesCollection.attachEvent("onAfterAdd",function(t){return n.callEvent("onAfterAdd",[t.id])}),this._setHandlers(),this.clearAll()}return t.prototype.attachEvent=function(t,e){this._event.on(t,e,this)},t.prototype.callEvent=function(t,e){return this._event.fire(t,e)},t.prototype.detachEvent=function(t){this._event.detach(t,this)},t.prototype.collapseItem=function(t){this.callEvent("onBeforeCollapse",[t])&&(this.getItem(t).update({open:!1}),this.callEvent("onAfterCollapse",[t]))},t.prototype.expandItem=function(t){this.callEvent("onBeforeExpand",[t])&&(this.getItem(t).update({open:!0}),this.callEvent("onAfterExpand",[t]))},t.prototype.clearAll=function(){this._shapesCollection.removeAll(),this._state={},this._selected=null},t.prototype.parse=function(t){this.clearAll();for(var e={},n=0,i=t;n<i.length;n++){var o=i[n];o.parent&&(e[o.parent]=!0),(!o.from||o.from&&!e[o.from])&&this.addItem(o),o.$selected&&(this.config.select?this._selected=o.id:o.$selected=!1)}this.paint()},t.prototype.load=function(t,e){var n=this;if(void 0===e&&(e="json"),this.callEvent("onBeforeLoad",[t,e])){var i=this._shapesCollection.load(new o.DataProxy(t));return i.then(function(t){n.callEvent("onAfterLoad",[t]),n.paint()}),i}},t.prototype.serialize=function(){return this._shapesCollection.getAll().map(function(t){return i({},t.config)})},t.prototype.getItem=function(t){return this._shapesCollection.getItem(t)},t.prototype.deleteItem=function(t){this.callEvent("onBeforeDelete",[t])&&(this._shapesCollection.remove(t),"org"===this.config.type&&this._shapesCollection.removeNested(t),this.callEvent("onAfterDelete",[t]),this.paint())},t.prototype.addItem=function(t){this._shapesCollection.add(t),"org"===this.config.type&&t.parent&&this.addItem({id:""+u.uid(),from:t.parent,to:t.id})},t.prototype.updateItem=function(t,e){var n=this._shapesCollection.getItem(t);n&&(n.config=i({},n.config,e))},t.prototype.paint=function(){var t=0;if(this._state&&this._state.gap){var e=this.getScrollState();t=this._state.gap-e.x}var n=this.getScrollState(),i=this._getContent(),o=this.config.gridStep;this.config.scroll?this._wrapper.style.overflow="auto":(this._wrapper.style.width=i.width+"px",this._wrapper.style.height=i.height+"px",this._wrapper.style.overflow="visible");var r={x:this._wrapper.offsetWidth/2-i.width/2,y:this._wrapper.offsetHeight/2-i.height/2},s="gridPattern-"+u.uid(),a="gridPattern-"+u.uid();this._wrapper.innerHTML='\n\t\t\t<svg\n\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\twidth="'+i.width+'"\n\t\t\t\theight="'+i.height+'"\n\t\t\t\tviewBox="0 0 '+i.width/this.config.scale+" "+i.height/this.config.scale+'"\n\t\t\t\tstyle="left:'+(r.x>0?r.x:0)+"px;top:"+(r.y>0?r.y:0)+'px;"\n\t\t\t\t>\n\t\t\t\t<defs>\n\t\t\t\t\t<marker id="arrow" markerWidth="10" markerHeight="10" refX="2.3" refY="2" orient="auto" markerUnits="strokeWidth">\n\t\t\t\t\t\t<path d="M0,0 L0,4 L3,2 z" class="dhx_diagram_arrow" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<pattern id="'+a+'" x="0" y="0" width="'+o+'px" height="'+o+'px" patternUnits="userSpaceOnUse">\n\t\t\t\t\t\t<rect width="'+o+'" height="'+o+'" stroke-width=".5" stroke="#E0E0E0" fill="transparent"/>\n\t\t\t\t\t</pattern>\n\n\t\t\t\t\t<pattern id="'+s+'" x="0" y="0" width="'+o*o+'px" height="'+o*o+'px" patternUnits="userSpaceOnUse">\n\t\t\t\t\t\t<rect width="'+o*o+'" height="'+o*o+'" stroke-width=".5" stroke="#E0E0E0" fill="url(#'+a+')"/>\n\t\t\t\t\t</pattern>\n\n\t\t\t\t</defs>\n\t\t\t'+(this.config.showGrid?'<g class="grid"\n\t\t\t\t\ttransform="translate(0,0)"\n\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\twidth="100%"\n\t\t\t\t\t\theight="100%"\n\t\t\t\t\t\tfill="url(#'+s+')"/>\n\t\t\t\t</g>':"")+"\n\t\t\t<g shape-rendering="+(this.config.scale>=1?"crispedges":"auto")+">\n\t\t\t\t"+i.shapes+"\n\t\t\t<g>\n\t\t\t</svg>",this.config.dragMode&&this._state.gap&&this.scrollTo(this._state.gap-t,n.y)},t.prototype.getSelectedId=function(){return this._selected},t.prototype.unselectItem=function(t){return!!this.callEvent("onBeforeUnSelect",[t])&&(this.updateItem(t,{$selected:!1}),this._selected=null,this.callEvent("onAfterUnSelect",[t]),!0)},t.prototype.selectItem=function(t){if(this.config.select){var e=this._selected;e!==t&&this.callEvent("onBeforeSelect",[t])&&(e&&!this.unselectItem(e)||(this._selected=t,this.updateItem(t,{$selected:!0}),this.callEvent("onAfterSelect",[t])))}else this._selected=null},t.prototype.getScrollState=function(){return{x:this._wrapper.scrollLeft,y:this._wrapper.scrollTop}},t.prototype.scrollTo=function(t,e){this._wrapper.scrollLeft=t,this._wrapper.scrollTop=e},t.prototype.showItem=function(t){var e=this.getItem(t);if(e){var n=e.config,i={x:(n.x+n.dx||0)+n.width/2,y:(n.y+n.dy||0)+n.height/2},o=this._wrapper.offsetWidth/2,r=this._wrapper.offsetHeight/2;this.scrollTo(i.x-o,i.y-r)}},t.prototype.eachItem=function(t){var e=this._shapesCollection.getShapes();for(var n in e)t(e[n])},t.prototype.eachChild=function(t,e){var n=this._shapesCollection.getShapes(),i=this._shapesCollection.getLinks(),o=c.buildLinksTree(i);if(o[t])for(var r=0,s=o[t];r<s.length;r++){var a=s[r];e(n[a.to]),o[a.to]&&this.eachChild(a.to,e)}},t.prototype.filter=function(t,e){void 0===e&&(e=!1),this._shapesCollection.filterShape(t,e)},t.prototype.eachShape=function(t,e){this._shapesCollection.eachShape(t,e)},t.prototype._setHandlers=function(){var t=this;this._container.addEventListener("click",function(e){var n=a.locate(e),i=t.getItem(n),o=a.locate(e,"dhx_diagram");n&&i&&!o&&(t.callEvent("onShapeClick",[n]),t.config.select&&(t.selectItem(n),setTimeout(function(){return t.paint()},1))),o&&(t._toggleGraph(n),t.paint())}),this._container.addEventListener("dblclick",function(e){var n=a.locate(e);n&&t.callEvent("onShapeDblClick",[n])}),this.config&&this.config.dragMode&&h.DragManager(this,this._container),this._wrapper.addEventListener("scroll",function(){t.callEvent("onScroll",[t.getScrollState()])})},t.prototype._toggleGraph=function(t){!1===this.getItem(t).config.open?this.expandItem(t):this.collapseItem(t)},t.prototype._getContent=function(){var t={width:this._container.offsetWidth,height:this._container.offsetHeight};this._state=this._state||{},this._state={shapes:"",width:this._state.width||0,height:this._state.height||0,gap:this._state.gap||0,container:t};var e;if(e="org"===this.config.type?c.AutoPlace(this._shapesCollection.getShapes(),this._shapesCollection.getLinks(),this.config,this._state):this._shapesCollection.getAll())for(var n=e.length-1;n>=0;n--)this._state.shapes+=e[n].toSVG();return this._state},t}();e.Diagram=l},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(t){this.url=t}return e.prototype.load=function(){return this._ajax(this.url)},e.prototype.save=function(t,e){var n={insert:"POST",delete:"DELETE",update:"POST"};return this._ajax(this.url,t,n[e]||"POST")},e.prototype._ajax=function(e,n,i){return void 0===i&&(i="GET"),new t(function(t,o){var r=new XMLHttpRequest;switch(r.onload=function(){r.status>=200&&r.status<300?t(r.response||r.responseText):o({status:r.status,statusText:r.statusText})},r.onerror=function(){o({status:r.status,statusText:r.statusText})},r.open(i,e),r.setRequestHeader("Content-Type","application/json"),i){case"POST":case"DELETE":case"PUT":r.send(JSON.stringify(n));break;case"GET":default:r.send()}})},e}();e.DataProxy=n}).call(e,n(8))},function(t,e,n){"use strict";function i(t){var e={};for(var n in t){var i=t[n].config;(e[i.from]=e[i.from]||[]).push({to:i.to,id:n})}return e}function o(t){for(var e={minX:r(t).config.x,width:0,height:0},n=0,i=t.visible;n<i.length;n++){var o=i[n],s={x:o.config.x+(o.config.dx||0),y:o.config.y+(o.config.dy||0)},a=s.x+o.config.width+t.config.margin.itemX*t.config.scale,c=s.y+o.config.height+t.config.margin.itemX*t.config.scale;e.minX=s.x<e.minX?s.x:e.minX,e.width=e.width<a?a:e.width,e.height=e.height<c?c:e.height}return e}function r(t){return t.pull[t.root]}function s(t,e){var n=t.content.container.width,i=t.content.container.height,o=r(t).config,s=(n/2-(o.width/2+o.x))/t.config.scale;return e.width=e.width+s+o.width,e.height=e.height+o.height,e.width=e.width<n?n:e.width,e.height=e.height<i?i:e.height,s}function a(t,e,n){var i=r(t).config,o=e.minX+n,s=n?i.width*t.config.scale:t.config.margin.itemX;if(t.content.gap=t.content.gap||0,o<0){var a=Math.abs(o)+s;a>t.content.gap&&(t.content.gap=a)}return e.width+=t.content.gap,t.content.gap}function c(t){var e=0,n=o(t);if(t.content.root=t.root,t.config.dragMode&&(e+=s(t,n)),e+=a(t,n,e),t.content.width=n.width>t.content.width?n.width:t.content.width,t.content.height=n.height>t.content.height?n.height:t.content.height,e)for(var i=0,r=t.visible;i<r.length;i++)r[i].config.x+=l(e,t.config.gridStep)}function u(t,e){t:for(var n in t){for(var i in e)if(e[i].config.to===n)continue t;return n}return Object.keys(t)[0]}function h(t,e,n,i){var o=t[n],r=e[n];if(r.config.$count=0,r.config.$totalWidth=0,delete r.config.$gap,i&&"vertical"===e[i].config.dir&&o&&(r.config.dir="vertical"),!1===r.config.open)return{c:1,w:r.config.width};if(o){for(var s=0,a=o;s<a.length;s++){var c=h(t,e,a[s].to,r.config.id);r.config.$count+=c.c,r.config.$totalWidth+=c.w}return"vertical"===r.config.dir?(r.config.$count=1,r.config.$totalWidth=r.config.width,{c:1,w:Math.max(r.config.width,r.config.$totalWidth)}):{c:r.config.$count,w:Math.max(r.config.width,r.config.$totalWidth)}}return r.config.$totalWidth=r.config.width,{c:1,w:r.config.width}}function l(t,e){return Math.round(t/e)*e}function d(t,e,n){return l((t=+t||0)+e,n)-e}function p(t,e,n,i,o,r){var s=t.pull[e];if(s.config.hidden)return{width:0,dy:i};t.visible.push(s);var a=Math.max(s.config.$totalWidth,s.config.width)+t.config.margin.itemX*(s.config.$count||1),c=Math.round((a-s.config.width-t.config.margin.itemX)/2),u=t.config.gridStep||10;s.config.x=l(c+n,u),s.config.y=l(i,u),s.config.dx=d(s.config.dx,s.config.x,u),s.config.dy=d(s.config.dy,s.config.y,u),e===t.root&&(s.config.$root=!0),s.config.dy=s.config.dy+s.config.y<t.config.margin.y?t.config.margin.y-s.config.y:s.config.dy,n+=s.config.dx,i+=s.config.dy,s.config.color=s.config.color||b[o%b.length];var h=t.hash[e];if(h){s.config.$expandColor=b[(o+1)%b.length];var f=t.pull[h[0].to];f&&f.config.color&&(s.config.$expandColor=f.config.color)}if(!1!==s.config.open&&(i+=s.config.height+t.config.margin.itemY,h))for(var _=0,g=h;_<g.length;_++){var v=g[_];if("vertical"===s.config.dir){var y=n;r&&"vertical"===t.pull[r].config.dir&&(y=n+Math.round(t.config.margin.itemX/2),s.config.$gap=0);var m=p(t,v.to,y,i,o+1,e);if(t.hash[v.to]&&!1!==t.pull[v.to].config.open){i=m.dy;var x=m.width+Math.round(t.config.margin.itemX/2);x>a&&(a=x)}else i+=s.config.height+t.config.margin.itemY}else n+=p(t,v.to,n,i,o+1,e).width}return{width:a,dy:i}}function f(t,e){var n=t.pull[e];if(!n.config.hidden&&!1!==n.config.open){var i=t.hash[e];if(i)for(var o=0,r=i;o<r.length;o++){var s=r[o];x(t,s.id),f(t,s.to)}}}function _(t,e){return void 0===e&&(e=15),[{x:t.x+t.width/2,y:t.y-e,dir:"top"},{x:t.x+t.width/2,y:t.y+t.height+e,dir:"bottom"},{x:t.x-e,y:t.y+t.height/2,dir:"left"},{x:t.x+t.width+e,y:t.y+t.height/2,dir:"right"}]}function g(t,e){return{x:e.x-t.x,y:e.y-t.y}}function v(t,e){var n=g(t,e);return Math.hypot?Math.hypot(n.x,n.y):Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}function y(t,e,n){for(var i={from:null,to:null},o=t.config.margin.itemY/2,r=_(e,0),s=_(n,0),a=_(e,o),c=_(n,o),u=v(a[1],c[0]),h=0;h<a.length;h++)for(var l=a[h],d=0;d<c.length;d++){var p=c[d],f=v(l,p),y=g(e,n);u>f&&y.y-o<e.height+o&&(u=Math.round(f),i.from=[r[h],l],i.to=[s[d],p])}return i.from&&i.to||(i.from=[r[1],a[1]],i.to=[s[0],c[0]]),i}function m(t){t.x=t.x+(t.dx||0),t.y=t.y+(t.dy||0)}function x(t,e){var n=t.links[e],i=w({},t.pull[n.config.from].config),o=w({},t.pull[n.config.to].config);if(m(i),m(o),!i.hidden&&!o.hidden){var r=i.$gap>=0?i.$gap:Math.round(t.config.margin.itemX/2);if("vertical"===i.dir){var s=i.x,a=Math.round(i.y+i.height/2),c=o.x,u=Math.round(o.y+o.height/2),h=s-r;n.config.points=[{x:s,y:a},{x:h,y:a},{x:h,y:u},{x:c,y:u}]}else{var l=y(t,i,o),s=l.from[1].x,a=l.from[1].y,c=l.to[1].x,u=l.to[1].y,d={x:l.to[1].x,y:l.from[1].y};n.config.points=[l.from[0],{x:s,y:a},{x:d.x,y:d.y},{x:c,y:u},l.to[0]]}t.visible.push(n)}}var w=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var b=["#FF9800","#607D8B","#00C7B5","#03A9F4","#9575CD","#F06292"];e.AutoPlace=function(t,e,n,o){if(0!==Object.keys(t).length){var r=u(t,e),s=i(e);h(s,t,r);var a={visible:[],hash:s,pull:t,config:n,links:e,root:r,content:o};return p(a,r,n.margin.x,n.margin.y,0),c(a),f(a,r),a.visible}},e.buildLinksTree=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){var n=this;this._downHandler=function(t){1===t.which&&n._handlers.onDown(t)&&(n._handlers.downPoints={x:t.clientX,y:t.clientY},n._isDragStart=!1,document.addEventListener("mousemove",n._moveHandler),document.addEventListener("mouseup",n._upHandler),document.body.classList.add("dhx_noselect"))},this._moveHandler=function(t){if(Math.abs(t.x-n._handlers.downPoints.x)>5||Math.abs(t.y-n._handlers.downPoints.y)>5){if(n._move)return;n._isDragStart||(n._isDragStart=!0,n._handlers.onDragStart&&n._handlers.onDragStart()),n._move=!0,n._handler=function(){if(n._isDragStart){var e={x:t.clientX-n._handlers.downPoints.x,y:t.clientY-n._handlers.downPoints.y};n._handlers.onMove(t,e,n._handlers.downPoints),n._move=!1}},requestAnimationFrame(n._handler)}},this._upHandler=function(t){document.removeEventListener("mousemove",n._moveHandler),document.removeEventListener("mouseup",n._upHandler),document.body.classList.remove("dhx_noselect"),n._isDragStart&&(cancelAnimationFrame(n._handler),n._handlers.onUp(t),n._isDragStart=!1,n._move=!1)},this._container=t,this._handlers=e,this._container.addEventListener("mousedown",this._downHandler)}}();e.Drag=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.isConnector=function(){return!0},e.prototype.toSVG=function(){return'<g dhx_id="">\n\t\t\t <polyline\n\t\t\t points = "'+this._getPoints()+'" '+this._getType()+' class="dhx_diagram_connector '+this.getCss()+'" stroke-width="1"/>\n\t\t</g>'},e.prototype._getType=function(){if(this.config.type)switch(this.config.type){case"line":return"";case"dash":return'stroke-dasharray="5, 5"';default:return""}},e.prototype._getPoints=function(){return this.config.points.map(function(t){return t.x+","+t.y}).join(" ")},e}(n(2).BaseShape);e.Connector=o},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),r=n(19),s=n(20),a=n(21),c=n(9),u=n(4),h=function(){function t(t){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this.config=t||{},this._copier=new r.Copier(this),this._sort=new a.Sort(this),this._loader=new s.Loader(this,this._changes),this._events=new o.EventSystem(this)}return t.prototype.attachEvent=function(t,e){this._events.on(t,e,this)},t.prototype.callEvent=function(t,e){return this._events.fire(t,e)},t.prototype.detachEvent=function(t){this._events.detach(t,this)},t.prototype.add=function(t,e){this.callEvent("onBeforeAdd",[t])&&(this.config.beforeAdd&&(t=this.config.beforeAdd(t)),t.id=t.id||u.uid(),this._pull[t.id]&&c.dhxError("Item already exist"),this._initOrder&&this._initOrder.length&&this._addToOrder(this._initOrder,t,e),this._addToOrder(this._order,t,e),this._onChange("insert",t.id,t),this.callEvent("onAfterAdd",[t]))},t.prototype.remove=function(t){this.getIndex(t)>=0&&this._pull[t]&&(this._onChange("delete",t,this._pull[t]),this._order=this._order.filter(function(e){return e!==t}),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e!==t}))},t.prototype.removeAll=function(){this._pull={},this._order=[],this._changes.order=[],this._initOrder=null},t.prototype.exists=function(t){return!!this._pull[t]},t.prototype.getItem=function(t){return this._pull[t]},t.prototype.update=function(t,e){var n=this.getItem(t);if(n){if(c.isEqualObj(e,n))return;e.id&&t!==e.id?(c.dhxWarning("this method doesn't allow change id"),c.isDebug()):(this._pull[t]=i({},this._pull[t],e),this._onChange("update",t,this._pull[t]))}else c.dhxWarning("item not found")},t.prototype.getIndex=function(t){var e=this._order.indexOf(t);return this._pull[t]&&e>=0?e:-1},t.prototype.getId=function(t){return this._order[t]},t.prototype.filter=function(t){var e=this;if(!t)return this._order=this._initOrder||this._order,void(this._initOrder=null);var n=this._order.filter(function(n){return t.rule&&"function"==typeof t.rule?t.rule(e._pull[n]):e._pull[n][t.by]===t.match});!n.length||this._initOrder&&this._initOrder.length||(this._initOrder=this._order,this._order=n)},t.prototype.find=function(t){for(var e in this._pull)return c.findByConf(this._pull[e],t);return null},t.prototype.findAll=function(t){var e=[];for(var n in this._pull){var i=c.findByConf(this._pull[n],t);i&&e.push(i)}return e},t.prototype.sort=function(t){this._sort.sort(this._order,t),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,t)},t.prototype.copy=function(t,e,n){return this._copier.copy(t,e,n)},t.prototype.move=function(t,e,n){return this._copier.move(this._order,t,e,n)},t.prototype.load=function(t,e){return this._loader.load(t,e)},t.prototype.parse=function(t,e){return this._loader.parse(t,e)},t.prototype.save=function(t){this._loader.save(t)},t.prototype.isSaved=function(){return!this._changes.order.length},t.prototype._addToOrder=function(t,e,n){n&&t[n]?(this._pull[e.id]=e,t.splice(n,0,e.id)):(this._pull[e.id]=e,t.push(e.id))},t.prototype._onChange=function(t,e,n){for(var o=0,r=this._changes.order;o<r.length;o++){var s=r[o];if(s.id===e&&!s.saving)return s.error&&(s.error=!1),void(s=i({},s,{obj:n,status:t}))}this._changes.order.push({id:e,status:t,obj:n,saving:!1})},t}();e.DataCollection=h},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=function(){function t(t){this._parent=t}return t.prototype.copy=function(t,e,n){if(!this._parent.exists(t))return null;var r=o.uid();return n?n.exists(t)?(n.add(i({},this._parent.getItem[t],{id:r}),e),r):(n.add(this._parent.getItem(t),e),t):(this._parent.add(i({},this._parent.getItem(t),{id:r}),e),r)},t.prototype.move=function(t,e,n,i){if(i&&this._parent.exists(e)){var r=this._parent.getItem(e);return i.exists(e)&&(r.id=o.uid()),i.add(r,n),this._parent.remove(r.id),r.id}return this._parent.getIndex(e)===n?null:(t.splice(n,0,t.splice(this._parent.getIndex(e),1)[0]),e)},t}();e.Copier=r},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=function(){function e(t,e){this._parent=t,this._changes=e}return e.prototype.load=function(t,e){var n=this;return this._parent.loadData=t.load().then(function(t){n._parent.removeAll(),n.parse(t,e)})},e.prototype.parse=function(t,e){void 0===e&&(e="json");for(var n=0,o=t=(e=i.toDataDriver(e)).toJsonArray(t);n<o.length;n++){var r=o[n];this._parent.add(r)}},e.prototype.save=function(e){for(var n=this,o=this,r=0,s=this._changes.order;r<s.length;r++)!function(r){if(r.saving||r.pending)i.dhxWarning("item is saving");else{var s=o._findPrevState(r.id);if(s&&s.saving){var a=new t(function(t,o){s.promise.then(function(){r.pending=!1,t(n._setPromise(r,e))}).catch(function(t){n._removeFromOrder(s),n._setPromise(r,e),i.dhxWarning(t),o(t)})});o._addToChain(a),r.pending=!0}else o._setPromise(r,e)}}(s[r]);this._parent.saveData.then(function(){n._saving=!1})},e.prototype._setPromise=function(t,e){var n=this;return t.promise=e.save(t.obj,t.status),t.promise.then(function(){n._removeFromOrder(t)}).catch(function(e){t.saving=!1,t.error=!0,i.dhxError(e)}),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},e.prototype._addToChain=function(t){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return t}):this._parent.saveData=t},e.prototype._findPrevState=function(t){for(var e=0,n=this._changes.order;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},e.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter(function(e){return!i.isEqualObj(e,t)})},e}();e.Loader=o}).call(e,n(8))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=function(){function t(t){this._parent=t}return t.prototype.sort=function(t,e){var n=this;e.rule&&"function"==typeof e.rule?this._sort(t,e):e.by&&(e.rule=function(t,o){var r=n._checkVal(e.as,t[e.by]),s=n._checkVal(e.as,o[e.by]);return i.naturalCompare(r,s)},this._sort(t,e))},t.prototype._checkVal=function(t,e){return t?t.call(this,e):e},t.prototype._sort=function(t,e){var n=this,i={asc:1,desc:-1};return t.sort(function(t,o){var r=n._parent.getItem(t),s=n._parent.getItem(o);return e.rule.call(n,r,s)*(i[e.dir]||i.asc)})},t}();e.Sort=o},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t={});var e={skipHeaders:!0,nameByHeader:!1,row:"\n",column:","};this.config=i({},e,t),this.config.nameByHeader&&(this.config.skipHeaders=!1)}return t.prototype.toJsonArray=function(t){return this._parseCsv(t)},t.prototype.getFields=function(t,e){var n=this;return t.trim().split(this.config.column).reduce(function(t,i,o){return o++,t[n.config.nameByHeader&&e?e[o]:o]=i,t},{})},t.prototype.getRows=function(t){return t.trim().split(this.config.row)},t.prototype._parseCsv=function(t){var e,n=this,i=this.getRows(t);return this.config.skipHeaders||(e=this.getFields(i.splice(0,1)[0])),i.map(function(t){return n.getFields(t,e)})},t}();e.CsvDriver=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.toJsonArray=function(t){return this.getRows(t)},t.prototype.getFields=function(t){return t},t.prototype.getRows=function(t){return"string"==typeof t?JSON.parse(t):t},t}();e.JsonDriver=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validation={email:/^[a-z\_\-\.]+@[a-z\_\-]+\.[a-z]{2,}$/i,number:/^\-?[0-9]{1,6}$/,color:/^\#[0-9A-Fa-f]{6}$/,date:/^[0-9]{4}\-[0-9]{1,2}\-[0-9]{1,2}$/}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,r=n(5),s=n(16),a={x:0,y:0,dx:0,dy:0},c=null;e.DragManager=function(t,e){i=e,o=t,new s.Drag(i,{onDown:function(t){var e=r.locate(t),n=o.getItem(e);if(e&&n){c=e;var i=n.config,s=i.dx,u=i.dy;return a.x=t.x,a.y=t.y,a.dx=s||0,a.dy=u||0,!0}},onDragStart:function(){o.callEvent("onDragStart",[c])},onMove:function(t){document.body.classList.add("dhx_noselect");var e=t.x-a.x+a.dx,n=t.y-a.y+a.dy;o.updateItem(c,{dx:e,dy:n}),o.paint(),o.callEvent("onDrag",[c])},onUp:function(){c&&o.callEvent("onDragEnd",[c])}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(29),o=n(17),r=n(7),s=n(32),a=n(33),c=n(30),u=n(31);e.ShapesFactory=function(t){switch(t.type){case"rect":return new c.Rect(t);case"circle":return new i.Circle(t);case"triangle":return new u.Triangle(t);case"line":return new o.Connector(t);case"card":return new r.DiagramCard(t);case"img-card":return new s.DiagramImgCard(t);case"svg-card":return new a.DiagramSvgCard(t);default:window.console.error("Wrong shape type: "+t.type,t)}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=n(26),s=function(t){function e(e,n){return t.call(this,{beforeAdd:function(t){var i=t.from?n:e;return t.type=t.type||i,r.ShapesFactory(t)}})||this}return i(e,t),e.prototype.getLinks=function(){return this._group().links},e.prototype.getShapes=function(){return this._group().shapes},e.prototype.getAll=function(){var t=this;return this._order.map(function(e){return t._pull[e]})},e.prototype.removeNested=function(t){var e=this._pull;for(var n in e){var i=e[n].config;i.from!==t&&i.to!==t&&i.id!==t||(this.remove(i.id),i.to&&this.removeNested(i.to))}},e.prototype.filterShape=function(t,e){void 0===e&&(e=!1);var n=this.getShapes();e||this.clearShapesHiddenAttribute(n);for(var i in n){var o=n[i].config;t(o)||(o.hidden=!0)}},e.prototype.clearShapesHiddenAttribute=function(t){for(var e in t)t[e].config.hidden=!1},e.prototype.eachShape=function(t,e){var n=this.getShapes();for(var i in n)t(n[i].config)&&e(n[i])},e.prototype._group=function(){var t={links:{},shapes:{}};for(var e in this._pull)this._pull[e].isConnector()?t.links[e]=this._pull[e]:t.shapes[e]=this._pull[e];return t},e}(o.DataCollection);e.ShapesCollection=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTrueCoords=function(t){return{x:t.x+t.dx||0,y:t.y+t.dy||0}},e.addIcon='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>',e.removeIcon='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"/></svg>',e.verticalIcon='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="18" viewBox="0 0 10 18"><path d="M2.5,5 C1.11928813,5 0,3.88071187 0,2.5 C0,1.11928813 1.11928813,0 2.5,0 C3.88071187,0 5,1.11928813 5,2.5 C5,3.88071187 3.88071187,5 2.5,5 Z M10,11 L5,11 L5,9 L3,9 L3,11 L3,15 L5,15 L5,13 L10,13 L10,18 L5,18 L5,16 L2,16 L2,15 L2,11 L2,9 L2,8 L2,5 L2.5,5 L3,5 L3,8 L5,8 L5,6 L10,6 L10,11 Z"/></svg>',e.horizontalIcon='<svg xmlns="http://www.w3.org/2000/svg" transform="translate(.5,.5)" width="20" height="15" viewBox="0 0 19 15"><path d="M10,4.94999094 L10,7 L17,7 L17,7.5 L17,10 L16,10 L16,8 L10,8 L10,10 L9,10 L9,8 L3,8 L3,10 L2,10 L2,7 L2.5,7 L9,7 L9,4.94999094 C7.85887984,4.71835578 7,3.70947896 7,2.5 C7,1.11928813 8.11928813,0 9.5,0 C10.8807119,0 12,1.11928813 12,2.5 C12,3.70947896 11.1411202,4.71835578 10,4.94999094 Z M-2.90878432e-13,10 L5,10 L5,15 L-2.90878432e-13,15 L-2.90878432e-13,10 Z M14,10 L19,10 L19,15 L14,15 L14,10 Z M7,10 L12,10 L12,15 L7,15 L7,10 Z"/></svg>'},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter();return'\n\t\t<g\n\t\t\tclass="'+(t.css||"")+'"\n\t\t\ttransform="translate('+t.x+","+t.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+')"\n\t\t\tdhx_id="'+t.id+'">\n\t\t\t\t<path\n\t\t\t\t\tclass="shape"\n\t\t\t\t\td="\n\t\t\t\t\tM0,'+e.y+"\n\t\t\t\t\ta"+e.x+","+e.y+" 0 1,0 "+t.width+",0\n\t\t\t\t\ta"+e.x+","+e.y+" 0 1,0 "+-t.width+',0"\n\t\t\t\t/>\n\t\t\t\t'+r.getTextTemplate(t,t.text)+"\n\t\t\t</g>\n\t\t"},e}(o.BaseShape);e.Circle=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter();return'\n\t\t<g\n\t\t\ttransform="translate('+t.x+","+t.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+')"\n\t\t\tclass="'+(t.css||"")+'"\n\t\t\tid="'+t.id+'"\n\t\t\tdhx_id="'+t.id+'">\n\t\t\t\t<rect\n\t\t\t\t\tclass="shape"\n\t\t\t\t\tid="'+t.id+'"\n\t\t\t\t\theight="'+t.height+'"\n\t\t\t\t\twidth="'+t.width+'"\n\t\t\t\t/>\n\t\t\t\t'+r.getTextTemplate(t,t.text)+"\n\t\t</g>"},e}(o.BaseShape);e.Rect=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter();return'\n\t\t<g transform="\n\t\t\ttranslate('+t.x+","+t.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+')"\n\t\t\tclass="'+(t.css||"")+'" dhx_id="'+t.id+'">\n\t\t\t<path\n\t\t\t\tclass="shape"\n\t\t\t\td="M '+t.width/2+" 0 L"+t.width+" "+t.height+" L 0 "+t.height+' z"\n\t\t/>\n\t\t\t'+r.getTextTemplate(t,t.text)+"\n\t\t</g>"},e}(o.BaseShape);e.Triangle=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getMetaInfo=function(){return[{id:"title",label:"Title",type:"text"},{id:"text",label:"Text",type:"text"},{id:"img",label:"Image",type:"uploader"}]},e.prototype.setDefaults=function(t){return t.width=t.width||210,t.height=t.height||90,t},e.prototype.getCss=function(){return"dhx_diagram_image "+t.prototype.getCss.call(this)},e.prototype.text=function(){var t=this.config;return"<div class='dhx_context_img' style='background-image:url("+(t.img||"")+");background-color:"+t.color+";'></div>"+"\n\t\t\t<div class='dhx_context_title'>"+(t.title||"")+"</div>\n\t\t\t<div class='dhx_context_text'>"+(t.text||"")+"</div>"},e}(n(7).DiagramCard);e.DiagramImgCard=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),r=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter(),n=t.$selected?t.color:"#E4E4E4",i=this.getCoords(t);return'\n\t\t<g transform="\n\t\ttranslate('+i.x+","+i.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+')"\n\t\tclass="'+this.getCss()+'"\n\t\tdhx_id="'+t.id+'"\n\t\t>\n\t\t\t<rect\n\t\t\t\tclass="dhx_item_shape"\n\t\t\t\tid="'+t.id+'"\n\t\t\t\theight="'+t.height+'"\n\t\t\t\twidth="'+t.width+'"\n\t\t\t\trx=1\n\t\t\t\try=1\n\t\t\t\tstroke="'+n+'"\n\t\t\t\tstroke-width=1\n\t\t\t/>\n\t\t\t<text y="'+t.height/2+'" dy="-5" x="'+t.width/2+'" text-anchor="middle">\n\t\t\t'+(t.title?'\n\t\t\t\t<tspan\n\t\t\t\t\tclass="dhx_content_title"\n\t\t\t\t>\n\t\t\t\t\t'+(t.title||"")+"\n\t\t\t\t</tspan>\n\t\t\t":"")+'\n\t\t\t\t<tspan\n\t\t\t\t\tclass="dhx_content_text"\n\t\t\t\t\tx='+t.width/2+"\n\t\t\t\t\tdy="+(t.title?"1.5em":".5em")+"\n\t\t\t\t>\n\t\t\t\t\t"+(t.text||"")+"\n\t\t\t\t</tspan>\n\t\t\t</text>\n\t\t\t"+r.getHeaderTpl(t)+"\n\t\t\t"+r.getCircleTpl(t)+"\n\t\t</g>"},e.prototype.getMetaInfo=function(){return[{id:"title",label:"Title",type:"text"},{id:"text",label:"Text",type:"text"}]},e.prototype.getCss=function(){return"dhx_diagram_svg-card "+(t.prototype.getCss.call(this)||"")},e}(o.DiagramCard);e.DiagramSvgCard=s},,,function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function r(t){if(l===clearTimeout)return clearTimeout(t);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function s(){_&&p&&(_=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!_){var t=o(s);_=!0;for(var e=f.length;e;){for(p=f,f=[];++g<e;)p&&p[g].run();g=-1,e=f.length}p=null,_=!1,r(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var h,l,d=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(t){l=i}}();var p,f=[],_=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new c(t,e)),1!==f.length||_||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){delete c[t]}function o(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function r(t){if(u)setTimeout(r,0,t);else{var e=c[t];if(e){u=!0;try{o(e)}finally{i(t),u=!1}}}}if(!t.setImmediate){var s,a=1,c={},u=!1,h=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick(function(){r(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&r(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){r(t.data)},s=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;s=function(e){var n=h.createElement("script");n.onreadystatechange=function(){r(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():s=function(t){setTimeout(r,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[a]=i,s(a),a++},l.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(12),n(36))},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var o=Function.prototype.apply;e.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(37),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={applyAll:"Apply all",resetChanges:"Reset Changes",editCard:"Edit Card",color:"Color",position:"Position",size:"Size"};e.default=i},,,,,,,,,function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(4),s=n(13),a=n(56),c=n(73),u=n(75);n(107),n(105);var h=n(74),l=n(6),d=n(72),p=n(28),f=n(40),_=function(){function t(t,e){this._eventSystem=new l.EventSystem(this),this._container=o.toNode(t),this.config=e,this.config.shapeType=this.config.shapeType||"card",this.config.showGrid=!1!==this.config.showGrid,this._diagramData=[{id:r.uid()}],this._init(),this._toolbar=new c.ToolBar(this._diagramCont),this._buildDiagram();this._resizer||(this._resizer=new d.Resizer(this,this._diagram,this._diagramCont)),this._setHandlers(),this._diagram.callEvent("onAfterSelect",this._diagramData[0].id)}return t.prototype.attachEvent=function(t,e){this._eventSystem.on(t,e,this)},t.prototype.callEvent=function(t,e){return this._eventSystem.fire(t,e)},t.prototype.detachEvent=function(t){this._eventSystem.detach(t,this)},t.prototype.import=function(t){this._diagramData=t.serialize(),this._buildDiagram()},t.prototype.parse=function(t){this._diagramData=t,this._buildDiagram()},t.prototype.serialize=function(){return this._diagram.serialize()},t.prototype._init=function(){this._container.innerHTML="";var t='\n\t\t<div class="dhx_editor" style="width:'+this._container.offsetWidth+"px;height:"+this._container.offsetHeight+'px;">\n\t\t\t<div class="dhx_topBar">\n\t\t\t\t<button class="dhx_btn dhx_btn--flat" dhx_id="resetAll">'+f.default.resetChanges+"</button>\n\t\t\t\t"+(!1!==this.config.showApply?'<button class="dhx_btn dhx_btn--active" dhx_id="applyAll">'+f.default.applyAll+"</button>":"")+'\n\t\t\t\t<div class="dhx_state_block">\n\t\t\t\t\t<div class="undo" dhx_id="undo"></div>\n\t\t\t\t\t<div class="redo" dhx_id="redo"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="dhx_editor_main">\n\t\t\t\t<div class="dhx_diagram" id="dhx_diagram_container"></div>\n\t\t\t\t<div class="dhx_sideBar" id="dhx_sideBar_container" dhx_id="sidebar">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>',e=o.insert(this._container,t.trim());this._content=e,this._diagramCont=e.querySelector("#dhx_diagram_container"),this._sideBarCont=e.querySelector("#dhx_sideBar_container"),this._sideBar=new a.Property(this._sideBarCont,{title:f.default.editCard}),this._sideBar.parseStruct(u.baseSidebar)},t.prototype._buildDiagram=function(){var t=this.config.shapeType||this._diagramData[0].type;this._diagram||(this._diagram=new s.Diagram(this._diagramCont,{type:this.config.type,select:!0,defaultShapeType:t,dragMode:!0,scroll:!0,showGrid:this.config.showGrid,gridStep:this.config.gridStep,margin:{y:70}}));var e=this._diagramData.map(function(t){return"object"==typeof t?i({},t):t});this._diagram.parse(e),this._undoManager=new h.UndoManager(this.serialize()),this._diagram.selectItem(this._diagramData[0].id),this._onStateChange()},t.prototype._updateTopBar=function(){var t=this._container.querySelector('[dhx_id="redo"]'),e=this._container.querySelector('[dhx_id="undo"]'),n=function(t,e,n){n?t.classList.add(e):t.classList.remove(e)};n(t,"redo--active",this._undoManager.isRedo()),n(e,"undo--active",this._undoManager.isUndo())},t.prototype._setHandlers=function(){var t=this;this._clickHandler=function(e){var n=o.locate(e);switch(n){case"add":t._addChild();break;case"remove":t._removeChild();break;case"vertical":case"horizontal":t._changeDirection(n);break;case"resetAll":t._buildDiagram();break;case"redo":t._redo();break;case"undo":t._undo();break;case"applyAll":t._onApply()}},this._container.addEventListener("click",this._clickHandler),this.attachEvent("onShapeResize",function(e){t._update(e),t._toolbar.hide()}),this.attachEvent("onAfterShapeResize",function(){t._onStateChange()}),this._diagram.attachEvent("onScroll",function(){t._update(null,!0)}),this._diagram.attachEvent("onAfterSelect",function(){t._update()}),this._sideBar.attachEvent("onChange",function(){t._changeTimeout&&(clearTimeout(t._changeTimeout),t._changeTimeout=null),t._changeTimeout=setTimeout(function(){var e=t._sideBar.getValues(),n={},i=function(t){for(var e in t){var o=t[e];"object"==typeof o?i(o):(o=isNaN(o)?o:parseFloat(o),n[e]=o)}};i(e),t._sidebarChanged=!0,t._updateItem(t._diagram.getSelectedId(),n)},100)}),this._diagram.attachEvent("onAfterCollapse",function(e){var n=t._diagram.getSelectedId();t._diagram.eachChild(e,function(i){n===i.config.id&&t._diagram.selectItem(e)}),t._onStateChange()}),this._diagram.attachEvent("onAfterExpand",function(){t._onStateChange()}),this._diagram.attachEvent("onDragStart",function(e){t._diagram.selectItem(e)}),this._diagram.attachEvent("onDrag",function(){t._update(),t._toolbar.hide()}),this._diagram.attachEvent("onDragEnd",function(){t._onStateChange()})},t.prototype._updateItem=function(t,e){this._diagram.updateItem(t,e),this._onStateChange()},t.prototype._addChild=function(){var t=this._diagram.getSelectedId(),e={id:r.uid(),parent:t};this._diagram.addItem(e),this._onStateChange(),this._diagram.showItem(t)},t.prototype._removeChild=function(){var t=this._diagram.getSelectedId(),e=this._diagram.getItem(t).config.parent||this._diagramData[0].id;this._diagram.deleteItem(t),this._diagram.selectItem(e),this._onStateChange()},t.prototype._changeDirection=function(t){var e=this._diagram.getItem(this._diagram.getSelectedId()).config;this._diagram.eachChild(e.id,function(t){t.config.dx=0,t.config.dy=0,t.config.dir="horizontal"}),"vertical"===t&&e.dir!==t&&this._updateItem(e.id,{dir:"vertical"}),"horizontal"===t&&e.dir!==t&&this._updateItem(e.id,{dir:""})},t.prototype._onApply=function(){this._update(),this.callEvent("onAfterApply",[])},t.prototype._update=function(t,e){void 0===e&&(e=!1),t=t||this._diagram.getSelectedId(),e||this._diagram.paint(),this._sidebarChanged?(this._sidebarChanged=!1,this._showToolbar(t,!0)):(this._showToolbar(t),this._updateSideBar(t)),this._updateTopBar(),this._diagram.getSelectedId()&&this._resizer&&this._resizer.showResize(this._diagram.getSelectedId())},t.prototype._onStateChange=function(){this._undoManager.update(this.serialize()),this._update()},t.prototype._updateSideBar=function(t){var e=this._diagram.getItem(t),n=i({},e.config);if(this._sidebarItemType!==n.type){var o=e.getMetaInfo().map(function(t){return t.type="text"===t.type?"textarea":t.type,t}).concat(u.baseSidebar);this._sideBar.parseStruct(o),this._sidebarItemType=n.type}for(var r={},s=0,a=e.getMetaInfo();s<a.length;s++){var c=a[s];r[c.id]=n[c.id]||""}var h=i({},r,{position:{dx:n.dx,dy:n.dy},size:{width:n.width,height:n.height},color:n.color});this._sideBar.parse(h)},t.prototype._showToolbar=function(t,e){if(void 0===e&&(e=!1),t){var n=this._diagram.getItem(t).config,o=p.getTrueCoords(n),r=this._diagramCont.querySelector("svg").getBoundingClientRect(),s=this._diagramCont.getBoundingClientRect(),a=!0;this._diagram.eachChild(t,function(){a=!1}),o.x+=r.left-s.left,o.y+=r.top-s.top,e?this._toolbar.update(i({},n,o,{$last:a})):this._toolbar.show(i({},n,o,{$last:a}))}},t.prototype._redo=function(){var t=this._undoManager.redo();t&&this._diagram.parse(t),this._updateTopBar(),this._update()},t.prototype._undo=function(){var t=this._undoManager.undo();t&&this._diagram.parse(t),this._updateTopBar(),this._update()},t}();e.DiagramEditor=_},,,,function(t,e){},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(103);var o=n(71),r=n(55),s=function(t){function e(e){var n=t.call(this,e)||this;return e=e||{},n.config.width=0,n.config.height=0,n.config.width=e.width||228,n.config.height=e.height||170,n.attachEvent("onClickOutside",function(){n.hide()}),n.attachEvent("onDomEvent",function(t,e){var i=e.target.getAttribute("dhx_color");"click"===t&&i&&(n._selected=i,n.callEvent("onColorChange",[n._selected]),n.hide())}),n}return i(e,t),e.prototype.reset=function(){this._selected=null},e.prototype._getCells=function(t){var e=this;return t.reduce(function(t,n,i){return t+='<div class="dhx_palette_cell '+(e._selected===n?"dhx_selected":"")+'" style="background:'+n+'" dhx_color="'+n+'"></div>'},"")},e.prototype._getGrayShades=function(){return'<div class="dhx_palette_row">\n\t\t\t'+this._getCells(r.grayShades)+"\n\t\t</div>"},e.prototype._getPalette=function(){var t=this;return r.palette.reduce(function(e,n,i){return e+='<div class="dhx_palette_col">'+t._getCells(n.colors)+"</div>"},"")},e.prototype._getContent=function(){return'<div class="dhx_colorpicker_wrap">\n\t\t\t<div class="dhx_palette" dhx_id="palette">\n\t\t\t\t'+this._getGrayShades()+"\n\t\t\t\t"+this._getPalette()+"\n\t\t\t</div>\n\t\t</div>"},e}(o.Popup);e.Colorpicker=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.grayShades=["#000000","#434343","#666666","#999999","#B7B7B7","#CCCCCC","#D9D9D9","#EFEFEF","#F3F3F3","#FFFFFF"],e.palette=[{name:"pink",colors:["#E91E63","#FCE4EC","#F8BBD0","#F06292","#C2185B","#880E4F"]},{name:"red",colors:["#F44336","#FFEBEE","#FFCDD2","#E57373","#D32F2F","#B71C1C"]},{name:"orange",colors:["#FF9800","#FFF3E0","#FFE0B2","#FFB74D","#F57C00","#EF6C00"]},{name:"yellow",colors:["#FFEB3B","#FFFDE7","#FFF9C4","#FFF176","#FBC02D","#F57F17"]},{name:"green",colors:["#4CAF50","#E8F5E9","#C8E6C9","#81C784","#388E3C","#1B5E20"]},{name:"blue green",colors:["#00C7B5","#C8FAF6","#8DE9E1","#03D7C4","#079D8F","#076F66"]},{name:"blue",colors:["#03A9F4","#E1F5FE","#B3E5FC","#4FC3F7","#0288D1","#01579B"]},{name:"indigo",colors:["#3F51B5","#E8EAF6","#C5CAE9","#7986CB","#303F9F","#1A237E"]},{name:"deep purple",colors:["#673AB7","#EDE7F6","#D1C4E9","#9575CD","#512DA8","#311B92"]},{name:"blue gray",colors:["#607D8B","#ECEFF1","#CFD8DC","#90A4AE","#455A64","#263238"]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(104);var i=n(70),o=n(0),r=n(57),s=n(5),a=function(){function t(t,e){this._container=s.toNode(t),this._config=e||{},r.EventsMixin(this),this._setEvents()}return t.prototype.locate=function(t){for(var e=t.srcElement||t.target||t;e&&e!==this.$view;){var n=e.getAttribute("dhx_id");if(n)return n;e=e.parentNode}},t.prototype.parseStruct=function(t){this._elements={},this._lines=[];for(var e=r.EventFacade(this),n=0;n<t.length;n++){var o=t[n];o.type=o.type.charAt(0).toUpperCase()+o.type.slice(1);var s=new i.items[o.type](o,e);this._lines.push(s),s.$editor&&(this._elements[o.id]=s)}this.render()},t.prototype.parse=function(t){this.setValues(t)},t.prototype.clear=function(){for(var t in this._elements)this._elements[t].clear()},t.prototype.getValues=function(){var t={};for(var e in this._elements)t[e]=this._elements[e].getValue();return t},t.prototype.setValues=function(t){for(var e in this._elements){var n=this._elements[e],i=t[e];i?(n.clear(i),n.setValue(i)):n.clear(i)}},t.prototype.render=function(){var t=document.createElement("div");t.className="dhx_property",this._config.title&&s.insert(t,'<div class="sidebar-title">\n\t\t\t'+this._config.title+"\n\t\t\t</div>");for(var e=0,n=this._lines;e<n.length;e++){var i=n[e];t.appendChild(i.render())}this._container.innerHTML="",this.$view=this._container.appendChild(t)},t.prototype._setEvents=function(){var t=this;o.event(this._container,"click",function(e){return t._click_event(e)}),this.$click={}},t.prototype._click_event=function(t){for(var e=t.srcElement||t.target,n="";e&&e!==this.$view;){var i=e.className;if(i)for(var o=i.split(" "),r=o.length-1;r>=0;r--)this.$click[o[r]]&&(n=n||this.locate(t),this.$click[o[r]](t,n,e));e=e.parentNode}},t}();e.Property=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6);e.EventsMixin=function(t){t=t||{};var e=new i.EventSystem(t);t.detachEvent=e.detach.bind(e),t.attachEvent=e.on.bind(e),t.callEvent=e.fire.bind(e)},e.EventFacade=function(t){return{attachEvent:t.attachEvent.bind(t),callEvent:t.callEvent.bind(t)}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getValue=function(){return this.config.value},e.prototype.setValue=function(t){this.config.value=t},e.prototype._getInput=function(){return this.$view.getElementsByTagName("button")[0]},e.prototype._setEvents=function(){var t=this;o.event(this._getInput(),"click",function(){t.ev.callEvent("onButtonClick",[t.config.id])})},e.prototype._toHTML=function(){return"<div class='dhx_label'>"+this.config.label+"</div>\n\t\t\t\t<div class='dhx_value'><button>"+this.config.inputLabel+"</button></div>"},e}(n(1).Text);e.Button=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setValue=function(t){this._getInput().checked=!!t,this.config.value=t},e.prototype.getValue=function(t){return t?this._getInput().checked:this.config.value},e.prototype._setEvents=function(){var t=this;o.event(this._getInput(),"change",function(){return t._changed()})},e.prototype._toHTML=function(){return"<div class='dhx_label'>\n\t\t\t\t\t"+this.config.label+"\n\t\t\t\t</div>\n\t\t\t\t<div class='dhx_value'>\n\t\t\t\t\t<input class='dhx_check' type='checkbox'>\n\t\t\t\t</div>"},e}(n(1).Text);e.Checkbox=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(0),s=n(4),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.attachToInput=function(){if(!this.config.attached){var t=document.getElementById(this.config.inputId);this.ui.linkTo(t,t),this.config.attached=!0}},e.prototype.show=function(){this.ui.show()},e.prototype._toHTML=function(){var t=this.config.inputId=s.uid();return"<div class='dhx_label'>"+this.config.label+"</div><div class='dhx_value'><input type='text' id='"+t+"'></div>"},e.prototype._setEvents=function(){var t=this;this.ui=new dhtmlXColorPicker({color:this.config.value}),this.ui.attachEvent("onSelect",function(){return t._changed()}),this.ui.attachEvent("onCancel",function(){t.ui.setColor(t.config.value),t.ui.hide()}),r.event(this._getInput(),"blur",function(){return t._changed()}),r.event(this._getInput(),"keyup",function(e){"Tab"===e.key&&(t.attachToInput(),t.show())}),this.config.validate&&r.event(this._getInput(),"keydown",function(){return setTimeout(function(){return t._validate()})}),r.event(this._getInput(),"focus",function(){return t.attachToInput()})},e}(o.Text);e.Color=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),s=n(24),a=n(54),c=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.setValue=function(t,e){(e||s.validation.color.test(t)&&t!==this.config.value)&&(this._color=t,this._getColorPicker().style.backgroundColor=t,this._colorPicker._selected=t)},e.prototype.clear=function(){this._colorPicker.reset(),this.setValue("",!0)},e.prototype.getValue=function(){return this._color||""},e.prototype._setEvents=function(){var t=this;o.event(this._getColorPicker(),"click",function(){return t._showPopup()}),this._colorPicker=new a.Colorpicker({}),this._colorPicker.attachEvent("onColorChange",function(e){t.setValue(e),t._changed()})},e.prototype._toHTML=function(){return'<div class="edit-section color-edit">\n\t\t<div class="section-title">'+(this.config.label||"")+'</div>\n\t\t<div class="color-edit">\n\t\t\t<div class="color-picker"></div>\n\t\t\t<div class="pop-up">'+(this.config.hint||"")+"</div>\n\t\t</div>\n\t</div>"},e.prototype._getColorPicker=function(){return this.$view.querySelector(".color-picker")},e.prototype._showPopup=function(){this._colorPicker.show(this._getColorPicker())},e}(r.Text);e.ColorPicker=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(0),s=n(4),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.attachToInput=function(){if(!this.config.attached){var t=document.getElementById(this.config.inputId);this.ui.attachObj(t),this.config.attached=!0}},e.prototype.show=function(){this.ui.show()},e.prototype._toHTML=function(){var t=this.config.inputId=s.uid();return"<div class='dhx_label'>"+this.config.label+"</div><div class='dhx_value'><input type='text' id='"+t+"'></div>"},e.prototype._setEvents=function(){var t=this;this.ui=new dhtmlXCalendarObject(this.config.inputId),this.ui.attachEvent("onClick",function(){return t._changed()}),this.ui.attachEvent("onHide",function(){return t._changed()}),r.event(this._getInput(),"blur",function(){return t.ui.hide()}),r.event(this._getInput(),"keyup",function(e){"Tab"===e.key&&(t.attachToInput(),t.show())}),this.config.validate&&r.event(this._getInput(),"keydown",function(){return setTimeout(function(){return t._validate()})}),r.event(this._getInput(),"focus",function(){return t.attachToInput()})},e}(o.Text);e.Date=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setValue=function(t,e){(t!==this.config.value||e)&&(this.config.value=t,this._getImage().src=t)},e.prototype.getValue=function(t){return t?this._getImage().src:this.config.value},e.prototype._getInput=function(){return this.$view.getElementsByTagName("input")[0]},e.prototype._getImage=function(){return this.$view.getElementsByTagName("img")[0]},e.prototype._setEvents=function(){var t=this;o.event(this._getInput(),"change",function(){return t._changed()})},e.prototype._toHTML=function(){return"<div class='edit-section'>\n\t\t<div class='section-title'>"+this.config.label+"</div>\n\t\t\t<div class='photo-wrapper'>\n\t\t\t<img src='"+this.config.value+"'>\n\t\t\t</div>\n\t\t\t<input class='dhx_image' type='file' accept='image/*'>\n\t\t</div>"},e.prototype._changed=function(){if(this._getInput().files&&this._getInput().files[0]){var t=URL.createObjectURL(this._getInput().files[0]),e=this.getValue();this.setValue(t,!0),this.ev.callEvent("onChange",[this.config.id,t,e])}},e}(n(1).Text);e.FileInput=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.$editor=!1}return t.prototype.render=function(){var t=this.$view=document.createElement("DIV");return t.className="dhx_group_item side-bar",t.innerHTML="Label",t},t}();e.Group=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(0),s=n(24),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setValue=function(t){var e=this.config.options,n=this;for(var i in t)!function(i){var o=e.filter(function(t){return t.id===i})[0],r=e.indexOf(o);n._setValue(t[i],!1,r)}(i)},e.prototype.getValue=function(){for(var t={},e=this.config.options,n=0;n<e.length;n++){var i=e[n];t[i.id]=i.value}return t},e.prototype.clear=function(){for(var t=this._getInputs(),e=0;e<t.length;e++)this._setValue("",!1,e)},e.prototype._setEvents=function(){for(var t=this,e=this._getInputs(),n=0;n<e.length;n++)!function(n){r.event(e[n],"change",function(){return t._changed(n)}),r.event(e[n],"input",function(){return t._changed(n)})}(n)},e.prototype._toHTML=function(){for(var t=this.config.options,e=t.length,n="",i="",o=0;o<e;o++){var r=t[o];i+="<input type='text' name='"+r.id+"' value='"+r.value+"' id='"+r.id+"'>",n+="<span>"+r.label+"</span>"}return"<div class='edit-section'>\n\t\t\t\t\t<div class='inputs_group'><span>"+this.config.label+"</span>"+i+"</div>\n\t\t\t\t\t<div class='inputs_group_desc'>"+n+"</div>\n\t\t\t\t</div>"},e.prototype._changed=function(t){void 0===t&&(t=0);var e=this._getValue(!0,t),n=this.config.options[t].value,i=this.config.options[t].id;this.config.validate&&!this._checkIsValid(t)?this.mark("dhx_invalid",!0,this.$view.querySelector("#"+i)):(this.mark("dhx_invalid",!1,this.$view.querySelector("#"+i)),e!==n&&(this._setValue(e,!1,t),this.ev.callEvent("onChange",[this.config.id,e,n])))},e.prototype._checkIsValid=function(t){void 0===t&&(t=0);var e=this.config.validate;if(e){var n=!0,i=this._getValue(!0,t);return""!==i&&(n="function"==typeof(e=s.validation[e]||e)?e.call(this,i):i.match(e)),n}},e.prototype._getInputs=function(){return this.$view.getElementsByTagName("input")},e.prototype._setValue=function(t,e,n){void 0===n&&(n=0),(t!==this.config.options[n].value||e)&&(this.config.options[n].value=t,this._getInputs()[n].value=t)},e.prototype._getValue=function(t,e){return void 0===e&&(e=0),t?this._getInputs()[e].value:this.config.options[e].value},e}(o.Text);e.Inputs=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getValue=function(){for(var t=this.$view.getElementsByTagName("input"),e=0;e<t.length;e++)if(t[e].checked){t=t[e].id;break}return t},e.prototype.setValue=function(t){for(var e=this.$view.getElementsByTagName("input"),n=0;n<e.length;n++)e[n].id===t&&(this.config.value=t,e[n].checked=!0)},e.prototype._setEvents=function(){var t=this;o.event(this._getInput(),"click",function(){return t._changed()})},e.prototype._toHTML=function(){for(var t=this.config.options,e=t.length,n="",i=0;i<e;i++){var o=t[i],r=o.id||o,s=o.value||o;n+="<input type='radio' name='"+this.config.id+"' value='"+s+"' id='"+r+"'><label for='"+r+"'>"+s+"</label>"}return"<div class='dhx_label'>"+this.config.label+"</div>\n\t\t\t\t<div class='dhx_value'>\n\t\t\t\t\t<div class='segmented'>\n\t\t\t\t\t\t"+n+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>"},e.prototype._getInput=function(){return this.$view.getElementsByClassName("segmented")[0]},e}(n(1).Text);e.Segment=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getText=function(t){t=t||this.config.value;for(var e=this.config.options,n=0;n<e.length;n++){var i=e[n];if((i.id||i)===t)return i.value||i}},e.prototype._setEvents=function(){var t=this;o.event(this._getInput(),"change",function(){return t._changed()})},e.prototype._toHTML=function(){for(var t=this.config.options,e=t.length,n="",i=0;i<e;i++){var o=t[i];n+="<option value='"+(o.id||o)+"'>"+(o.value||o)+"</option>"}return"<div class='dhx_label'>"+this.config.label+"</div>\n\t\t\t\t<div class='dhx_value'>\n\t\t\t\t\t<select>\n\t\t\t\t\t\t"+n+"\n\t\t\t\t\t</select>\n\t\t\t\t</div>"},e.prototype._getInput=function(){return this.$view.getElementsByTagName("select")[0]},e}(n(1).Text);e.Select=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getValue=function(t){return t?this._getTextarea().value:this.config.value},e.prototype.setValue=function(t,e){(t!==this.config.value||e)&&(this.config.value=this._getTextarea().value=t)},e.prototype._setEvents=function(){var t=this;o.event(this._getTextarea(),"change",function(){return t._changed()}),o.event(this._getTextarea(),"input",function(){return t._changed()})},e.prototype._toHTML=function(){var t=this.config;return'<div class="edit-section text-edit">\n\t\t\t'+(t.label?'<div class="section-title">'+t.label+"</div>":"")+'\n\t\t\t<textarea class="dhx_textarea" placeholder="'+(t.placeholder||"")+'"></textarea>\n\t\t</div>'},e.prototype._getTextarea=function(){return this.$view.getElementsByTagName("textarea")[0]},e}(n(1).Text);e.Textarea=r},function(t,e,n){"use strict";(function(t){var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.setValue=function(t,e){var n=this.$view.querySelector("#dhx_img_preview");if(t){if(t===this._path)return;this._path=t,n.style.backgroundImage="url("+t+")"}else n.style.backgroundImage="",this._path=""},n.prototype.clear=function(t){t!==this._path&&this.setValue("")},n.prototype.getValue=function(){return this._path||""},n.prototype._getBase64=function(e){return new t(function(t,n){e||n();var i=new FileReader;i.onloadend=function(){t(i.result)},i.readAsDataURL(e)})},n.prototype._setEvents=function(){var t=this,e=(this.config.path,this.$view.querySelector("#dhx_img_upload")),n=this.$view.querySelector("#dhx_img_preview");e.addEventListener("change",function(i){var o=e.files[0];n.classList.add("loading"),t._getBase64(o).then(function(e){t.setValue(e),t._changed(),n.classList.remove("loading")}).catch(function(){n.classList.remove("loading")})})},n.prototype._toHTML=function(){return'<div class="edit-section color-edit">\n\t\t<div class="section-title">'+(this.config.label||"")+'</div>\n\t\t<div class="dhx_img_uploader">\n\t\t\t<label>\n\t\t\t\t<input class="dhx_uploader_input" type="file" name="file" id="dhx_img_upload" accept=".jpg, .jpeg, .png" style="display:none">\n\t\t\t\t<div class="dhx_uploader_preview" id="dhx_img_preview" alt="">\n\t\t\t\t\t<div class="dhx_loading"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="pop-up">'+(this.config.hint||"Click to upload")+"</div>\n\t\t\t</label>\n\t\t</div>\n\t</div>"},n}(n(1).Text);e.Uploader=o}).call(e,n(8))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(62),r=n(60),s=n(64),a=n(58),c=n(67),u=n(59),h=n(66),l=n(68),d=n(65),p=n(63),f=n(61),_=n(69);e.items={Text:i.Text,Date:o.Date,Color:r.Color,Group:s.Group,Select:c.Select,Checkbox:u.Checkbox,Segment:h.Segment,Button:a.Button,Textarea:l.Textarea,Image:Image,Inputs:d.Inputs,Fileinput:p.FileInput,Colorpicker:f.ColorPicker,Uploader:_.Uploader}},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(6);n(106);var s=function(){function t(t){var e=this,n={width:400,height:400};this.config=i({},n,t),this._eventSystem=new r.EventSystem(this),this.attachEvent("onDomEvent",function(t,n){if("mousedown"===t&&(e._pressPoint=n.target),"mouseup"===t){if(1!==n.which)return!1;if(!o.isNested(n.target,e._popup)&&!o.isNested(e._pressPoint,e._popup))return void e.callEvent("onClickOutside",[])}})}return t.prototype.attachEvent=function(t,e){this._eventSystem.on(t,e,this)},t.prototype.detachEvent=function(t){this._eventSystem.detach(t,this)},t.prototype.callEvent=function(t,e){return this._eventSystem.fire(t,e)},t.prototype.show=function(t){if(this._hideTimer)return clearTimeout(this._hideTimer),void this._popup.classList.remove("hide");this._popup||(this._render(this._getPosition(t)),this.addDomEvent("mousedown"),this.addDomEvent("mouseup"),this.addDomEvent("click",this._popup),this.callEvent("onAfterShow",[]))},t.prototype.hide=function(){var t=this;!1!==this.callEvent("onBeforeHide",[o.isNested(this._pressPoint,this._popup)])&&(this._popup.classList.add("hide"),this._hideTimer=setTimeout(function(){o.remove(t._popup);for(var e in t._domEvents)t.removeDomEvent(e);t._popup=t._domEvents=t._hideTimer=null,t.callEvent("onAfterHide",[])},200))},t.prototype.addDomEvent=function(t,e){var n=this;this._domEvents=this._domEvents||{},this._domEvents[t]||(e=e||document,this._domEvents[t]={element:e,handler:function(e){n.callEvent("onDomEvent",[t,e])}},e.addEventListener(t,this._domEvents[t].handler))},t.prototype.removeDomEvent=function(t){var e=this._domEvents[t];e&&(e.element.removeEventListener(t,e.handler),delete this._domEvents[t])},t.prototype._getContent=function(){return""},t.prototype._fill=function(){},t.prototype._render=function(t){var e='\n\t\t\t<div class="dhx_popup" style="\n\t\t\twidth:'+this.config.width+"px;\n\t\t\theight:"+this.config.height+"px;\n\t\t\ttop:"+t.top+"px;\n\t\t\tleft:"+t.left+'px;\n\t\t\t">\n\t\t\t\t<div class="dhx_popup_content dhx_card" style="width:100%;height:100%;">\n\t\t\t\t\t'+this._getContent()+"\n\t\t\t\t</div>\n\t\t\t</div>";this._popup=o.insert(document.body,e.trim()),this._fill()},t.prototype._getPosition=function(t){var e=(t=o.toNode(t)).getBoundingClientRect(),n=document.body.getBoundingClientRect(),i=e.left+e.width/2,r=e.bottom,s=i-this.config.width/2,a=e.bottom+this.config.height,c={top:r,left:s},u={top:e.top-this.config.height,bottom:n.bottom-a,left:s,right:n.right-e.right};return u.right<0&&(c.left=e.right-this.config.width),u.left<0&&(c.left=e.left),u.bottom<0&&u.top>0?(c={top:r-this.config.height,left:s},(u.right<0||u.left<0)&&(c.left=u.right<0?e.right-this.config.width:e.left)):u.bottom<0&&(c.top=e.bottom+n.bottom-a,c.left=e.right,u.left<0&&(c.left=e.right)),c},t}();e.Popup=s},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(28),s=n(16),a=function(){function t(t,e,n){this.editor=t,this._diagram=e,this._diagramCont=n,this._gripWidth=10,this._init()}return t.prototype.showResize=function(t){if(t&&this._diagram.getItem(t)){var e=this._getRectPoints(t);this.removeResize();var n={tl:"nw-resize",tm:"n-resize",tr:"ne-resize",rm:"e-resize",br:"nw-resize",bm:"n-resize",bl:"ne-resize",lm:"e-resize"};this._selectors=[];for(var i in e){var r=e[i];this._selectors.push(o.insert(this._diagramCont,"<div style='\n\t\t\t\tcursor:"+n[i]+";\n\t\t\t\tposition:absolute;\n\t\t\t\ttop:"+r.y+"px;\n\t\t\t\tleft:"+r.x+"px;'\n\t\t\t\tdhx_resize=\""+i+'"\n\t\t\t\tclass="dhx_resize_grip"\n\t\t\t\t>\n\t\t\t\t</div>'))}}},t.prototype.removeResize=function(){if(this._selectors)for(var t=0,e=this._selectors;t<e.length;t++){var n=e[t];o.remove(n)}},t.prototype._init=function(){var t=this;new s.Drag(this._diagramCont,{onMove:function(e,n,i){var o=2*t._diagram.config.gridStep;n.x=n.x+(o-n.x%o),n.y=n.y+(o-n.y%o);var s=r.getTrueCoords(t._itemConfig),a=t._diagramCont.querySelector("svg").getBoundingClientRect(),c=s.x+t._gripWidth<i.x-a.left,u=s.y+t._gripWidth<i.y-a.top;n.x=c?n.x:-n.x,n.y=u?n.y:-n.y,"tm"!==t._point&&"bm"!==t._point||(n.x=0),"lm"!==t._point&&"rm"!==t._point||(n.y=0);var h=u?0:n.y,l=t._itemConfig.width+n.x,d=t._itemConfig.height+n.y;l<30||d<30||(t._diagram.updateItem(t._itemConfig.id,{width:l,height:d,dy:t._itemConfig.dy-h}),t.editor.callEvent("onShapeResize",[t._itemConfig.id]))},onUp:function(){return t.editor.callEvent("onAfterShapeResize",[t._itemConfig.id]),!0},onDown:function(e){var n=o.locate(e,"dhx_resize"),r=t._diagram.getSelectedId();if(n&&r)return t._point=n,t._itemConfig=i({},t._diagram.getItem(r).config),!0}})},t.prototype._getRectPoints=function(t){var e=this._diagram.getItem(t).config,n=r.getTrueCoords(e),i=this._diagramCont.querySelector("svg").getBoundingClientRect(),o=this._diagramCont.getBoundingClientRect(),s=e.width,a=e.height,c=n.x-this._gripWidth/2+i.left-o.left,u=n.y-this._gripWidth/2+i.top-o.top,h={x:c+s/2,y:u},l={x:c+s,y:u+a/2};return{tl:{x:c,y:u},tm:h,tr:{x:c+s,y:u},rm:l,br:{x:c+s,y:u+a},bm:{x:h.x,y:u+a},bl:{x:c,y:u+a},lm:{x:c,y:l.y}}},t}();e.Resizer=a},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(28),s=function(){function t(t,e){var n={width:150,height:50};this.config=e||{},this.config=i({},n,e),this._container=o.toNode(t)}return t.prototype.show=function(t){this.hide(),this._item=t;this.config.width=164,t.$root&&(this.config.width-=36),t.$last&&(this.config.width-=72);var e=this._getCoords(t),n='\n\t\t<div class="dhx_popup dhx_card" style="\n\t\theight:'+this.config.height+"px;\n\t\ttop:"+e.top+"px;\n\t\tleft:"+e.left+'px;\n\t\t">\n\t\t'+this._getContent(t)+"\n\t\t</div>";this._popup=o.insert(this._container,n.trim())},t.prototype.hide=function(){this._popup&&(o.remove(this._popup),this._popup=null)},t.prototype.update=function(t){var e=this._getCoords(t);this._popup.style.top=e.top+"px",this._popup.style.left=e.left+"px"},t.prototype.isOpen=function(){return!!this._popup},t.prototype._getContent=function(t){var e=t.$last?"":'<div class="dhx_toolbar_icon dhx_hor '+("vertical"===t.dir?"":"dhx_active")+'" dhx_id="horizontal">'+r.horizontalIcon+'</div>\n\t\t<div class="dhx_toolbar_icon dhx_vert '+("vertical"===t.dir?"dhx_active":"")+'" dhx_id="vertical">'+r.verticalIcon+"</div>";return'\n\t\t<div class="dhx_item_toolbar">\n\t\t\t<div class="dhx_toolbar_icon dhx_add_new" dhx_id="add">\n\t\t\t\t'+r.addIcon+"\n\t\t\t</div>\n\t\t\t"+e+"\n\t\t\t"+(t.$root?"":'<div class=" dhx_toolbar_icon dhx_remove" dhx_id="remove">'+r.removeIcon+"</div>")+"\n\t\t</div>\n\t\t"},t.prototype._getCoords=function(t){var e={x:t.x+t.width/2-this.config.width/2,y:t.y-this.config.height-10};return{top:e.y,left:e.x}},t}();e.ToolBar=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._initialState=t,this.reset()}return t.prototype.update=function(t){this._state.push(t),this._position=this._state.length-1},t.prototype.reset=function(){this._state=[this._initialState],this._position=0},t.prototype.undo=function(){if(this.isUndo())return this._position--,this._state[this._position]},t.prototype.redo=function(){if(this.isRedo())return this._position++,this._state[this._position]},t.prototype.isUndo=function(){return this._position-1>0},t.prototype.isRedo=function(){return this._position+1<=this._state.length-1},t}();e.UndoManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseSidebar=[{id:"color",type:"colorpicker",label:"Color",hint:"Top line",value:"#FFDDFF"},{id:"position",type:"inputs",label:"Position",validate:"number",options:[{id:"dx",value:"1000",label:"Left"},{id:"dy",value:"999",label:"Top"}]},{id:"size",type:"inputs",label:"Size",validate:"number",options:[{id:"width",value:"300",label:"Width"},{id:"height",value:"200",label:"Height"}]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(53);var i=n(13),o=n(49),r=n(40),s=window.dhx=window.dhx||{};s.i18n=s.i18n||{},s.i18n.setLocale=function(t,e){var n=s.i18n[t];for(var i in e)n[i]=e[i]},s.i18n.diagram=s.i18n.diagram||r.default,window.dhx.Diagram=i.Diagram,window.dhx.DiagramEditor=o.DiagramEditor},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){}]);